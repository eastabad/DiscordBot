# 方案1部署完成后验证清单

## 🚀 一键部署命令

在你的VPS服务器上执行：
```bash
# 下载方案1专用脚本
wget https://你的项目地址/方案1专用部署脚本.sh

# 或者手动创建脚本文件，然后执行
sudo bash 方案1专用部署脚本.sh
```

## ✅ 部署后验证步骤

### 1. 验证nginx配置
```bash
sudo nginx -t
sudo systemctl status nginx
```

### 2. 验证Discord Bot运行状态
```bash
curl http://127.0.0.1:5000/api/health
```

### 3. 验证外部HTTPS访问
```bash
curl https://www.tdindicator.top/bot-status
```

### 4. 验证v2ray功能未受影响
访问你的v2ray客户端，确认翻墙功能正常

### 5. 验证原网站功能
访问 `https://www.tdindicator.top/` 确认原网站正常

## 🎯 可用的API端点

部署成功后，这些地址立即可用：
- `https://www.tdindicator.top/webhook/tradingview` - TradingView Webhook
- `https://www.tdindicator.top/api/send-message` - 发送Discord消息
- `https://www.tdindicator.top/api/send-dm` - 发送私信
- `https://www.tdindicator.top/bot-status` - 健康检查
- `https://www.tdindicator.top/bot-api` - API文档

## 🔧 故障排除

### 如果nginx测试失败
```bash
# 查看详细错误
sudo nginx -t

# 查看错误日志
sudo tail -f /var/log/nginx/error.log

# 恢复备份
sudo cp /etc/nginx/sites-available/你的配置文件.backup.时间戳 /etc/nginx/sites-available/你的配置文件
sudo systemctl reload nginx
```

### 如果Discord Bot无法访问
1. 确认Bot在5000端口运行：`ps aux | grep python`
2. 检查防火墙设置：`sudo ufw status`
3. 查看nginx访问日志：`sudo tail -f /var/log/nginx/access.log`

## 🎉 成功标志

看到以下输出表示部署成功：
- nginx配置测试通过
- nginx重新加载成功
- 外部HTTPS访问正常
- Discord Bot API响应正常

## 📱 TradingView设置

部署完成后，在TradingView中设置Webhook地址：
```
https://www.tdindicator.top/webhook/tradingview
```

## 🔐 安全说明

- 端口5000仅内部访问，外部无法直接连接
- 所有外部请求通过HTTPS加密
- 使用你现有的SSL证书
- v2ray和Discord Bot功能完全隔离